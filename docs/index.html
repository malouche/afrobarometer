<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Load Afrobarometer data  • afrobarometer</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">afrobarometer</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="afrobarometer-load-afrobarometer-data-into-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#afrobarometer-load-afrobarometer-data-into-r" class="anchor"></a><code>afrobarometer</code>: Load Afrobarometer Data into R</h1></div>
<p>The <code>afrobarometer</code> automates laoding Afrobarometer Survey data into the R environment. Open access data is downloaded as needed. The user supplies any optional restricted access data (i.e. survey respondents georeferenced by sampling unit). Merged data is cached in the Afrobarometer data directory and read into R as a local <code>data.frame</code>.</p>
<ul>
<li>
<a href="http://www.afrobarometer.org/data">Data</a><br>
</li>
<li><a href="http://www.afrobarometer.org/data/data-use-policy">Data usage policy</a></li>
</ul>
<div id="install" class="section level2">
<h2 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"sboysel/afrobarometer"</span>)</code></pre></div>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<ul>
<li>Open access data: individual responses to survey questionnaires.</li>
<li>Restricted access data (optional, but must be placed manually): spatial locations, recently administered rounds.</li>
</ul>
<p>The <code>afrobarometer</code> package fetches any public access data necessary and merges the available spatial data with the questionnaire data. If spatial data is not provided for a specific round, the final table is simply the questionnaire data.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(afrobarometer)
<span class="kw"><a href="reference/afrb_dir.html">afrb_dir</a></span>(<span class="dt">path =</span> <span class="st">"~/Dropbox/dataset/Afrobarometer"</span>)</code></pre></div>
<p><code>afrb_dir</code> sets the local cache directory to <code>path</code>, creating subdirectories and the local database file as needed. If you have access to spatial location data for each round, place the CSV files in the <code>location</code> subdirectory of the Afrobarometer and name them <code>Locations_R1.csv</code>, <code>Locations_R2.csv</code>, etc. For example, if you have spatial information for rounds 3 and 4, your Afrobarometer data directory should look like this after running <code>afrb_dir</code>:</p>
<pre><code>.
├── locations
│   ├── Locations_R3.csv
│   └── Locations_R4.csv
├── questionnaires
└── codebooks

3 directories, 2 files</code></pre>
<p>Build the database locally</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/afrb_build.html">afrb_build</a></span>(<span class="dt">rounds =</span> <span class="dv">3</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">overwrite =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Open access questionnaire data and codebooks are downloaded as needed and placed in the Afrobarometer data directory, . If spatial data is available, it is merged to questionnaire data for each round. Built datasets are stored in the subdirectory  of . The Afrobarometer directory should now have the following structure:</p>
<pre><code>.
├── build
│   ├── afrb_3.rds
│   └── afrb_4.rds
├── locations
│   ├── Locations_R3.csv
│   └── Locations_R4.csv
├── questionnaires
│   ├── merged_r3_data.sav
│   └── merged_r4_data.sav
└── codebooks
    ├── merged_r3_codebook2_0.pdf
    └── merged_r4_codebook3.pdf

4 directories, 8 files</code></pre>
<p>Pull the merged Round 3 data into R</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">r3 &lt;-<span class="st"> </span><span class="kw"><a href="reference/afrb_round.html">afrb_round</a></span>(<span class="dt">round =</span> <span class="dv">3</span>)</code></pre></div>
</div>
<div id="notes" class="section level2">
<h2 class="hasAnchor">
<a href="#notes" class="anchor"></a>Notes</h2>
<ol style="list-style-type: decimal">
<li>Column names are converted to lowercase on import.</li>
<li>As of now, the only variables kepted from the the location files (i.e. Afrobarometer georeferenced data) are the respondent number, latitude, and longitude of the respondent (i.e. respondent’s cluster). These variables are then merged with the full questionnaire by respondent number.</li>
</ol>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>This package simply structures the Afrobarometer data for analysis. Any use of the Afrobarometer data must comply with it’s <a href="http://www.afrobarometer.org/data/data-use-policy">Data Usage and Access Policy</a>. The data is protected by copywright and the authors request the following citation for any use of either the open or restricted data:</p>
<pre><code>Afrobarometer Data, [Country(ies)], [Round(s)], [Year(s)], available at http://www.afrobarometer.org</code></pre>
</div>
<div id="todo" class="section level2">
<h2 class="hasAnchor">
<a href="#todo" class="anchor"></a>TODO</h2>
<ul>
<li>[ ] Package tests (afrobarometer Coverage: 18.28%)</li>
<li>[x] Download codebooks</li>
<li>[x] Discuss merging details: take lat + long + respno</li>
<li>[x] Switch to caching merged data as <code>rds</code> in <code>build</code> directory.</li>
<li>[ ] Merge multiple rounds together (Inter-round question correspondence, if possible)</li>
</ul>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sam Boysel <br><small class="roles"> Author, maintainer </small> </li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sam Boysel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
